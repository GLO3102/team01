<div class="panel">
    <div class="ajax-loading" ng-if="isLoading">
        <img src="img/cat-mouse_Transparent.gif">
    </div>
    <div class="panel-body" ng-if="!isLoading">
        <div class="detail header">
            <h2>{{movie.trackName}} <a href="{{movie.trackViewUrl}}"> <img ng-src="img/itunes.svg"/></a>
                <span class="pull-right">
                    <user-watchlist-dropdown ></user-watchlist-dropdown>
                <back-button></back-button>
                </span>
            </h2>
        </div>
        <div class="detail body">
            <div class="row detail section">
                <div class="detail preview">
                    <youtube-preview movie="{{movie.trackName}}"></youtube-preview>
                    <iframe ob-lazytube width="95%" height="50%" src="{{movie.previewUrl|trusted}}" seamless
                            frameborder="0" allowfullscreen autoplay="true"></iframe>
                </div>
                <div class="detail description">
                    <ul>
                        <li><h3>{{movie.trackName}}</h3></li>
                        <li><label>Duration </label> <span>{{movie.trackTimeMillis| duration}}</span></li>
                        <li><label>Genre</label> <span>{{movie.primaryGenreName}}</span></li>
                        <li><label>Release date</label> <span>{{movie.releaseDate | date:medium}}</span></li>
                        <li><label>Director</label> <span>{{movie.artistName}}</span></li>
                        <li><label>Rating</label> <span>{{movie.contentAdvisoryRating}}</span></li>
                        <li><label>Description</label>
                            <p ng-bind-html ="movie.longDescription|htmlToPlaintext|unicode"></p></li>
                    </ul>
                    <price-toggle></price-toggle>
                    <h4 class="detail price" ng-hide="isHdPriceSelected">Price SD <span>{{movie.trackPrice}}$ {{movie.currency}}</span>
                    </h4>
                    <h4 class="detail price" ng-show="isHdPriceSelected">Price HD <span>{{movie.trackHdPrice}}$ {{movie.currency}}</span>
                    </h4>
                </div>
            </div>
            <div class="row detail section">

                <div class="block-comment">

                    <form name="commentForm" role="form" ng-submit="addComment(userComment)">
                      <h3> Wanna make a comment?! </h3>
                      <div class="form-group">
                        <textarea rows="5" class="form-control resize-none" id="commentTextArea" type="text" name="message" required ng-model="userComment"/>
                        <div class="top-buffer-15">
                          <button type="submit" ng-disabled="commentForm.$invalid" class="btn btn-primary">Add comment</button>
                        </div>
                      </div>
                    </form>

                    <div class="inner-comment" style="overflow-y:scroll">
                      <div ng-repeat="comment in movieComments">
                        <div class="row top-buffer-30">
                            <div class="col-md-1">
                              <div display="block">
                                <img src="/img/anonymous.gif" width="75px">
                                <h4>{{comment.author}}</h4>
                              </div>
                            </div>
                            <div class="col-md-11">
                              <div class="dialogbox">
                                <div class="body">
                                  <span class="tip tip-left"></span>
                                  <div class="message">
                                    <span>{{comment.content}}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                        </div>
                      </div>
                    </div>

                </div>

                <div class="detail poster">
                    <img ng-src="{{movie.artworkUrl100 | imageSize:300:300}}">
                </div>
            </div>
        </div>
    </div>
</div>
